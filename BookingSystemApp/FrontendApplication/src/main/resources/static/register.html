<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - BarberBook</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/auth.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="auth-container" style="max-width: 500px; width: 100%;">
        <!-- Logo -->
        <div class="text-center mb-4">
            <div class="logo-placeholder bg-light rounded d-flex align-items-center justify-content-center mx-auto" style="width: 60px; height: 60px;">
                <i class="fas fa-cut text-primary fs-4"></i>
            </div>
            <h3 class="mt-3 fw-bold">Create Account</h3>
            <p class="text-muted">Join us and start booking</p>
        </div>

        <!-- Registration Form -->
        <form id="registerForm">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">First Name</label>
                        <div class="input-group">
                                <span class="input-group-text">
                                    <i class="fas fa-user text-muted"></i>
                                </span>
                            <input type="text"
                                   class="form-control"
                                   id="registerFirstName"
                                   placeholder="First name"
                                   minlength="2"
                                   maxlength="100"
                                   required>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Last Name</label>
                        <div class="input-group">
                                <span class="input-group-text">
                                    <i class="fas fa-user text-muted"></i>
                                </span>
                            <input type="text"
                                   class="form-control"
                                   id="registerLastName"
                                   placeholder="Last name"
                                   minlength="2"
                                   maxlength="100"
                                   required>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Email Address</label>
                <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-envelope text-muted"></i>
                        </span>
                    <input type="email"
                           class="form-control"
                           id="registerEmail"
                           placeholder="Enter your email"
                           maxlength="255"
                           required>
                </div>
            </div>

            <!-- Phone Number Field -->
            <div class="mb-3">
                <label class="form-label">Phone Number</label>
                <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-phone text-muted"></i>
                        </span>
                    <input type="tel"
                           class="form-control"
                           id="registerPhone"
                           placeholder="+1 234 567 8900"
                           pattern="^[+]?[0-9]{10,15}$"
                           title="Enter a valid phone number (10-15 digits, optionally starting with +)"
                           required>
                </div>
                <small class="text-muted">
                    Include country code (e.g., +1 for US/Canada, +44 for UK, +353 for Ireland)
                </small>
            </div>

            <div class="mb-3">
                <label class="form-label">Password</label>
                <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-lock text-muted"></i>
                        </span>
                    <input type="password"
                           class="form-control"
                           id="registerPassword"
                           placeholder="Create a password"
                           minlength="8"
                           maxlength="50"
                           pattern="^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=!*]).*$"
                           title="Password must be 8+ characters with uppercase, lowercase, number, and special character"
                           required>
                    <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <small class="text-muted">
                    Must be 8+ characters with uppercase, lowercase, number, and special character (@#$%^&+=!*)
                </small>
            </div>

            <div class="mb-3">
                <label class="form-label">Confirm Password</label>
                <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-lock text-muted"></i>
                        </span>
                    <input type="password"
                           class="form-control"
                           id="registerConfirmPassword"
                           placeholder="Confirm your password"
                           required>
                    <button class="btn btn-outline-secondary" type="button" id="toggleConfirmPassword">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>

            <div class="mb-4">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="agreeTerms" required>
                    <label class="form-check-label" for="agreeTerms">
                        I agree to the <a href="#" class="text-primary text-decoration-none">Terms and Conditions</a>
                        and <a href="#" class="text-primary text-decoration-none">Privacy Policy</a>
                    </label>
                </div>
            </div>

            <button type="submit" id="registerBtn" class="btn btn-primary w-100 mb-3">
                <span class="btn-text">Create Account</span>
            </button>

            <div class="text-center">
                <small class="text-muted">Already have an account?
                    <a href="login.html" class="text-primary text-decoration-none fw-bold">Sign in here</a>
                </small>
            </div>
        </form>

        <!-- Message Area -->
        <div id="registerMessage" class="mt-3"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/auth.js"></script>
<script>
    // Password visibility toggle
    document.getElementById('togglePassword').addEventListener('click', function() {
        const passwordField = document.getElementById('registerPassword');
        const icon = this.querySelector('i');

        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            passwordField.type = 'password';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    });

    document.getElementById('toggleConfirmPassword').addEventListener('click', function() {
        const passwordField = document.getElementById('registerConfirmPassword');
        const icon = this.querySelector('i');

        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            passwordField.type = 'password';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    });

    // Phone number formatting (optional)
    document.getElementById('registerPhone').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, ''); // Remove all non-digits

        // Add + if not present and number starts with country code
        if (value.length > 0 && !e.target.value.startsWith('+')) {
            if (value.length >= 10) {
                e.target.value = '+' + value;
            } else {
                e.target.value = value;
            }
        }
    });

    // Real-time validation feedback
    document.getElementById('registerPhone').addEventListener('blur', function() {
        const phone = this.value.trim();
        const pattern = /^[+]?[0-9]{10,15}$/;

        if (phone && !pattern.test(phone)) {
            this.classList.add('is-invalid');
            if (!this.nextElementSibling || !this.nextElementSibling.classList.contains('invalid-feedback')) {
                const feedback = document.createElement('div');
                feedback.className = 'invalid-feedback';
                feedback.textContent = 'Please enter a valid phone number (10-15 digits)';
                this.parentNode.parentNode.appendChild(feedback);
            }
        } else {
            this.classList.remove('is-invalid');
            const feedback = this.parentNode.parentNode.querySelector('.invalid-feedback');
            if (feedback) feedback.remove();
        }
    });
</script>
</body>
</html>
